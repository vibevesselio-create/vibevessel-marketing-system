2026-01-14 01:57:12 | INFO | Started workflow: FP-DEDUP-20260114075712
2026-01-14 01:57:12 | INFO | ================================================================================
2026-01-14 01:57:12 | INFO | PRODUCTION RUN: FINGERPRINT EMBEDDING + SYNC + DEDUPLICATION
2026-01-14 01:57:12 | INFO | ================================================================================
2026-01-14 01:57:12 | INFO | Fingerprint Embedding: EXECUTE
2026-01-14 01:57:12 | INFO | Fingerprint Sync: EXECUTE
2026-01-14 01:57:12 | INFO | Deduplication: DRY RUN
2026-01-14 01:57:12 | INFO | 
2026-01-14 01:57:12 | INFO | 
2026-01-14 01:57:12 | INFO | Querying tracks from Notion database...
2026-01-14 01:57:12 | INFO | HTTP Request: GET https://api.notion.com/v1/databases/27ce7361-6c27-80fb-b40e-fefdd47d6640 "HTTP/1.1 429 Too Many Requests"
2026-01-14 01:57:12 | WARNING | Could not fetch Tracks DB property types: You have been rate limited. Please try again in a few minutes.
2026-01-14 01:57:46 | INFO | HTTP Request: POST https://api.notion.com/v1/databases/27ce7361-6c27-80fb-b40e-fefdd47d6640/query "HTTP/1.1 200 OK"
2026-01-14 01:57:46 | INFO | Queried 3 tracks from Notion for processing
2026-01-14 01:57:46 | INFO | âœ… Found 3 tracks from Notion for processing
2026-01-14 01:57:46 | INFO | ================================================================================
2026-01-14 01:57:46 | INFO | STEP 1: EMBED FINGERPRINTS IN FILE METADATA
2026-01-14 01:57:46 | INFO | ================================================================================
2026-01-14 01:57:46 | INFO | Mode: EXECUTE
2026-01-14 01:57:46 | INFO | Limit: 2 files
2026-01-14 01:57:46 | INFO | Processing 3 tracks from Notion
2026-01-14 01:57:46 | INFO | 
2026-01-14 01:57:46 | INFO | Processing tracks from Notion (Notion-first workflow)...
[soundcloud_download_prod_merge] Spotify integration unavailable (No module named 'spotify_integration_module'); Spotify features disabled.
2026-01-14 01:57:46 | INFO | Unified logging initialized via shared_core.logging
2026-01-14 01:57:46 | INFO | ðŸ§µ Max concurrency for batch mode: 4
2026-01-14 01:57:46 | INFO | ðŸ“‘ Order mode: priority_then_created | Priority numeric mode: True | Name-order: ['Critical', 'High', 'Medium', 'Low']
/Users/brianhellemn/Library/Python/3.13/lib/python/site-packages/librosa/core/intervals.py:8: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
  from pkg_resources import resource_filename
2026-01-14 01:57:48 | WARNING | âš ï¸ Smart Eagle API not available, using fallback
2026-01-14 01:57:48 | INFO | ðŸ“ Using OUT_DIR: /Volumes/VIBES/Playlists
2026-01-14 01:57:48 | INFO | ðŸ“ Using BACKUP_DIR: /Volumes/VIBES/Djay-Pro-Auto-Import
2026-01-14 01:57:48 | INFO | ðŸ“ Using WAV_BACKUP_DIR: /Volumes/VIBES/Apple-Music-Auto-Add
2026-01-14 01:57:48 | INFO | ðŸ¦… Eagle API: http://localhost:41595
2026-01-14 01:57:48 | INFO | ðŸ¦… Eagle Library: /Volumes/OF-CP2019-2025/Music Library-2.library
2026-01-14 01:57:48 | INFO | ðŸ“š Volume index enabled: /Users/brianhellemn/Projects/github-production/var/music_volume_index.json
2026-01-14 01:57:48 | INFO | ðŸ“ Using OUT_DIR: /Volumes/VIBES/Playlists
2026-01-14 01:57:48 | INFO | ðŸ“ Using BACKUP_DIR: /Volumes/VIBES/Djay-Pro-Auto-Import
2026-01-14 01:57:48 | INFO | ðŸ“ Using WAV_BACKUP_DIR: /Volumes/VIBES/Apple-Music-Auto-Add
2026-01-14 01:57:48 | WARNING | âš ï¸  Unified State Registry not available: No module named 'unified_state_registry'
2026-01-14 01:57:48 | INFO | Processing tracks from Notion (will continue until success or limit reached)...
2026-01-14 01:57:48 | INFO | Fetching all Eagle items for matching...
2026-01-14 01:57:49 | INFO | ðŸ“Š Fetched 21121 items from Eagle library
2026-01-14 01:57:49 | INFO | Fetched 21121 Eagle items
2026-01-14 01:57:49 | INFO | [1/2] Processing track: Inciting Ferdinand
2026-01-14 01:57:49 | WARNING |   âš ï¸  File path missing or file does not exist for track: Inciting Ferdinand
2026-01-14 01:57:49 | INFO |   ðŸ“¥ Triggering full download workflow for track: Inciting Ferdinand
2026-01-14 01:57:49 | INFO |   ðŸ”„ Running full production workflow (download â†’ process â†’ import â†’ update)...
2026-01-14 02:02:27 | INFO | ðŸ”„ Processing track: Inciting Ferdinand by Alejo
2026-01-14 02:02:27 | INFO | ðŸŽµ Processing Spotify track: Inciting Ferdinand by Alejo
2026-01-14 02:02:27 | INFO | ðŸ” Searching for alternative audio source (YouTube)...
2026-01-14 02:02:28 | INFO | âœ… Updated metadata for Spotify track: Inciting Ferdinand
2026-01-14 02:02:28 | INFO | âœ… Found YouTube URL in Notion: https://www.youtube.com/watch?v=EbFYwwT6t3c
2026-01-14 02:02:28 | INFO | ðŸ”„ Downloading Spotify track from YouTube: https://www.youtube.com/watch?v=EbFYwwT6t3c
2026-01-14 02:02:28 | INFO | 
================================================================================
2026-01-14 02:02:28 | INFO | ðŸŽµ PROCESSING TRACK
2026-01-14 02:02:28 | INFO | ================================================================================
2026-01-14 02:02:28 | INFO | URL: https://www.youtube.com/watch?v=EbFYwwT6t3c
2026-01-14 02:02:28 | INFO | Playlist: No Playlist Assigned
2026-01-14 02:02:28 | INFO | Retry: 0/20
2026-01-14 02:02:28 | INFO | 
ðŸ“Š TRACK_INFO from Notion:
2026-01-14 02:02:28 | INFO | {
  "page_id": "2e7e7361-6c27-81e5-891f-fc0af3aaf971",
  "title": "Inciting Ferdinand",
  "artist": "Alejo",
  "title_cleaned": "Inciting Ferdinand",
  "artist_cleaned": "Alejo",
  "album": "Transitions",
  "genre": "",
  "soundcloud_url": "",
  "spotify_id": "3A60dd3h5Gpsw0dr2QEbS5",
  "spotify_url": "https://open.spotify.com/track/3A60dd3h5Gpsw0dr2QEbS5",
  "youtube_url": "https://www.youtube.com/watch?v=EbFYwwT6t3c",
  "bpm": null,
  "key": "",
  "duration_seconds": 239.56,
  "eagle_file_id": "",
  "audio_normalized": false,
  "wav_file_path": "",
  "aiff_file_path": "",
  "m4a_file_path": "",
  "download_source": "YouTube (Spotify)"
}
2026-01-14 02:02:28 | INFO | ðŸ” PRE-DOWNLOAD DUPLICATE CHECK: Inciting Ferdinand by Alejo
2026-01-14 02:02:28 | INFO | ðŸ” EAGLE DE-DUPLICATION: Finding matches for 'Inciting Ferdinand.wav'
2026-01-14 02:02:28 | INFO |    Title: Inciting Ferdinand
2026-01-14 02:02:28 | INFO |    Artist: Alejo
2026-01-14 02:02:28 | INFO |    Fingerprint: No
2026-01-14 02:02:29 | INFO | ðŸ“Š Fetched 21121 items from Eagle library
2026-01-14 02:02:49 | INFO | ðŸ” Found 0 Eagle items for filename 'Inciting Ferdinand' (base: 'Inciting Ferdinand')
2026-01-14 02:02:49 | INFO | ðŸ” No Eagle items found for: Inciting Ferdinand
2026-01-14 02:02:49 | INFO | âœ… NO DUPLICATES FOUND: Proceeding with download and processing
2026-01-14 02:02:49 | INFO | ðŸ” PARSING URL: https://www.youtube.com/watch?v=EbFYwwT6t3c
2026-01-14 02:02:49 | INFO |    â†’ Parsed artist from URL: 'None'
2026-01-14 02:02:49 | INFO |    â†’ Parsed track from URL: 'None'
2026-01-14 02:02:49 | INFO | âœ… Successfully processed Spotify track via YouTube: Inciting Ferdinand
2026-01-14 02:02:49 | INFO |   âœ… Full workflow completed successfully for: Inciting Ferdinand
2026-01-14 02:02:49 | INFO | 
2026-01-14 02:02:49 | INFO | ================================================================================
2026-01-14 02:02:49 | INFO | âœ… SUCCESS: Track 'Inciting Ferdinand' fully processed via download workflow!
2026-01-14 02:02:49 | INFO |    - Downloaded and processed: âœ…
2026-01-14 02:02:49 | INFO |    - Fingerprint embedded: âœ…
2026-01-14 02:02:49 | INFO |    - Fingerprint synced to Eagle: âœ…
2026-01-14 02:02:49 | INFO |    - Notion updated: âœ…
2026-01-14 02:02:49 | INFO | ================================================================================
2026-01-14 02:02:49 | INFO | 
2026-01-14 02:02:49 | INFO | 
2026-01-14 02:02:49 | INFO | ================================================================================
2026-01-14 02:02:49 | INFO | TRACK PROCESSING SUMMARY
2026-01-14 02:02:49 | INFO | ================================================================================
2026-01-14 02:02:49 | INFO | Tracks attempted: 1
2026-01-14 02:02:49 | INFO | Processed: 1
2026-01-14 02:02:49 | INFO | Succeeded: 1
2026-01-14 02:02:49 | INFO | Failed: 0
2026-01-14 02:02:49 | INFO | Skipped: 0
2026-01-14 02:02:49 | INFO | Eagle items found: 0
2026-01-14 02:02:49 | INFO | Fingerprints embedded: 1
2026-01-14 02:02:49 | INFO | Fingerprints synced: 1
2026-01-14 02:02:49 | INFO | Notion updated: 1
2026-01-14 02:02:49 | INFO | 
2026-01-14 02:02:49 | INFO | âœ… Workflow completed successfully!
2026-01-14 02:02:49 | INFO | ================================================================================
2026-01-14 02:02:49 | INFO | 
2026-01-14 02:02:49 | INFO | Completed step: fingerprint_embedding
2026-01-14 02:02:49 | INFO | 
2026-01-14 02:02:49 | INFO | âœ… Fingerprint embedding completed
2026-01-14 02:02:49 | INFO | 
2026-01-14 02:02:49 | INFO | ================================================================================
2026-01-14 02:02:49 | INFO | STEP 2: SYNC FINGERPRINTS TO EAGLE TAGS
2026-01-14 02:02:49 | INFO | ================================================================================
2026-01-14 02:02:49 | INFO | Sync already handled in per-track workflow for 3 tracks
2026-01-14 02:02:49 | INFO | 
2026-01-14 02:02:49 | INFO | âœ… Fingerprint sync completed
2026-01-14 02:02:49 | INFO | 
2026-01-14 02:02:49 | INFO | ================================================================================
2026-01-14 02:02:49 | INFO | CHECKING FINGERPRINT COVERAGE
2026-01-14 02:02:49 | INFO | ================================================================================
2026-01-14 02:02:49 | INFO | Unified logging initialized via shared_core.logging
2026-01-14 02:02:49 | INFO | ðŸ§µ Max concurrency for batch mode: 4
2026-01-14 02:02:49 | INFO | ðŸ“‘ Order mode: priority_then_created | Priority numeric mode: True | Name-order: ['Critical', 'High', 'Medium', 'Low']
2026-01-14 02:02:49 | WARNING | âš ï¸ Smart Eagle API not available, using fallback
2026-01-14 02:02:49 | INFO | ðŸ“ Using OUT_DIR: /Volumes/VIBES/Playlists
2026-01-14 02:02:49 | INFO | ðŸ“ Using BACKUP_DIR: /Volumes/VIBES/Djay-Pro-Auto-Import
2026-01-14 02:02:49 | INFO | ðŸ“ Using WAV_BACKUP_DIR: /Volumes/VIBES/Apple-Music-Auto-Add
2026-01-14 02:02:49 | INFO | ðŸ¦… Eagle API: http://localhost:41595
2026-01-14 02:02:49 | INFO | ðŸ¦… Eagle Library: /Volumes/OF-CP2019-2025/Music Library-2.library
2026-01-14 02:02:49 | INFO | ðŸ“š Volume index enabled: /Users/brianhellemn/Projects/github-production/var/music_volume_index.json
2026-01-14 02:02:49 | INFO | ðŸ“ Using OUT_DIR: /Volumes/VIBES/Playlists
2026-01-14 02:02:49 | INFO | ðŸ“ Using BACKUP_DIR: /Volumes/VIBES/Djay-Pro-Auto-Import
2026-01-14 02:02:49 | INFO | ðŸ“ Using WAV_BACKUP_DIR: /Volumes/VIBES/Apple-Music-Auto-Add
2026-01-14 02:02:49 | WARNING | âš ï¸  Unified State Registry not available: No module named 'unified_state_registry'
2026-01-14 02:02:50 | INFO | ðŸ“Š Fetched 21121 items from Eagle library
2026-01-14 02:02:50 | INFO | Total items: 21121
2026-01-14 02:02:50 | INFO | Items with fingerprints: 4249
2026-01-14 02:02:50 | INFO | Coverage: 20.1%
2026-01-14 02:02:50 | INFO | Threshold: 80.0%
2026-01-14 02:02:50 | WARNING | âš ï¸  Fingerprint coverage (20.1%) below threshold (80.0%)
2026-01-14 02:02:50 | WARNING |    Consider running batch fingerprint embedding before deduplication
2026-01-14 02:02:50 | INFO | Completed step: fingerprint_coverage_check
2026-01-14 02:02:50 | WARNING | 
2026-01-14 02:02:50 | WARNING | âš ï¸  WARNING: Fingerprint coverage is below recommended threshold
2026-01-14 02:02:50 | WARNING |    Deduplication may rely heavily on fuzzy matching instead of fingerprints
2026-01-14 02:02:50 | WARNING |    Consider running batch fingerprint embedding first
2026-01-14 02:02:50 | WARNING | 
2026-01-14 02:02:50 | INFO | 
2026-01-14 02:02:50 | INFO | ================================================================================
2026-01-14 02:02:50 | INFO | STEP 4: EAGLE LIBRARY DEDUPLICATION
2026-01-14 02:02:50 | INFO | ================================================================================
2026-01-14 02:02:50 | INFO | Mode: DRY RUN
2026-01-14 02:02:50 | INFO | Min Similarity: 75%
2026-01-14 02:02:50 | INFO | Cleanup: Disabled
2026-01-14 02:02:50 | INFO | Require Fingerprints: True (minimum coverage: 80%)
2026-01-14 02:02:50 | INFO | 
2026-01-14 02:02:50 | INFO | Unified logging initialized via shared_core.logging
2026-01-14 02:02:50 | INFO | ðŸ§µ Max concurrency for batch mode: 4
2026-01-14 02:02:50 | INFO | ðŸ“‘ Order mode: priority_then_created | Priority numeric mode: True | Name-order: ['Critical', 'High', 'Medium', 'Low']
2026-01-14 02:02:50 | WARNING | âš ï¸ Smart Eagle API not available, using fallback
2026-01-14 02:02:50 | INFO | ðŸ“ Using OUT_DIR: /Volumes/VIBES/Playlists
2026-01-14 02:02:50 | INFO | ðŸ“ Using BACKUP_DIR: /Volumes/VIBES/Djay-Pro-Auto-Import
2026-01-14 02:02:50 | INFO | ðŸ“ Using WAV_BACKUP_DIR: /Volumes/VIBES/Apple-Music-Auto-Add
2026-01-14 02:02:50 | INFO | ðŸ¦… Eagle API: http://localhost:41595
2026-01-14 02:02:50 | INFO | ðŸ¦… Eagle Library: /Volumes/OF-CP2019-2025/Music Library-2.library
2026-01-14 02:02:50 | INFO | ðŸ“š Volume index enabled: /Users/brianhellemn/Projects/github-production/var/music_volume_index.json
2026-01-14 02:02:50 | INFO | ðŸ“ Using OUT_DIR: /Volumes/VIBES/Playlists
2026-01-14 02:02:50 | INFO | ðŸ“ Using BACKUP_DIR: /Volumes/VIBES/Djay-Pro-Auto-Import
2026-01-14 02:02:50 | INFO | ðŸ“ Using WAV_BACKUP_DIR: /Volumes/VIBES/Apple-Music-Auto-Add
2026-01-14 02:02:50 | WARNING | âš ï¸  Unified State Registry not available: No module named 'unified_state_registry'
2026-01-14 02:02:50 | INFO | ================================================================================
2026-01-14 02:02:50 | INFO | ðŸ” EAGLE LIBRARY-WIDE DEDUPLICATION SCAN
2026-01-14 02:02:50 | INFO | ================================================================================
2026-01-14 02:02:50 | INFO |    Mode: DRY RUN
2026-01-14 02:02:50 | INFO |    Min Similarity: 75%
2026-01-14 02:02:50 | INFO |    Cleanup: Disabled
2026-01-14 02:02:50 | INFO | 
2026-01-14 02:02:50 | INFO | ðŸ“¥ Fetching all items from Eagle library...
2026-01-14 02:02:50 | INFO | ðŸ“Š Fetched 21121 items from Eagle library
2026-01-14 02:02:50 | INFO | ðŸ“Š Found 21121 items in library
2026-01-14 02:02:50 | INFO | 
2026-01-14 02:02:50 | INFO | ðŸ“Š PATH RESOLUTION STATISTICS (sample)
2026-01-14 02:02:50 | INFO |    Items with API paths: 0/100 (0.0%)
2026-01-14 02:02:50 | INFO |    Items with resolved paths: 100/100 (100.0%)
2026-01-14 02:02:50 | INFO |    Items without paths: 0/100 (0.0%)
2026-01-14 02:02:50 | INFO |    Estimated full library: 21,121 accessible, 0 URL-based
2026-01-14 02:02:50 | INFO |    Path cache: 21121 entries, 17895 resolved, 84.7% hit rate
2026-01-14 02:02:50 | INFO | 
2026-01-14 02:02:50 | INFO | ================================================================================
2026-01-14 02:02:50 | INFO | ðŸ” CHECKING FINGERPRINT COVERAGE
2026-01-14 02:02:50 | INFO | ================================================================================
2026-01-14 02:05:04 | INFO |    Total items: 21121
2026-01-14 02:05:04 | INFO |    Items with fingerprints: 4249
2026-01-14 02:05:04 | INFO |    Coverage: 20.1%
2026-01-14 02:05:04 | INFO |    Threshold: 80.0%
2026-01-14 02:05:04 | WARNING | 
2026-01-14 02:05:04 | WARNING | âš ï¸  WARNING: Fingerprint coverage is below recommended threshold!
2026-01-14 02:05:04 | WARNING |    Current coverage: 20.1%
2026-01-14 02:05:04 | WARNING |    Recommended threshold: 80.0%
2026-01-14 02:05:04 | WARNING |    Deduplication will rely heavily on fuzzy/ngram matching instead of fingerprints.
2026-01-14 02:05:04 | WARNING | 
2026-01-14 02:05:04 | WARNING |    RECOMMENDED ACTIONS:
2026-01-14 02:05:04 | WARNING |    1. Run batch fingerprint embedding: scripts/batch_fingerprint_embedding.py
2026-01-14 02:05:04 | WARNING |    2. Run fingerprint sync: scripts/sync_fingerprints_to_eagle.py
2026-01-14 02:05:04 | WARNING |    3. Then re-run deduplication
2026-01-14 02:05:04 | WARNING | 
2026-01-14 02:05:04 | ERROR | âŒ BLOCKING: require_fingerprints=True and coverage below threshold
2026-01-14 02:05:04 | ERROR |    Deduplication aborted. Please embed fingerprints first.
2026-01-14 02:05:04 | ERROR | 
2026-01-14 02:05:04 | ERROR |    CRITICAL: Fingerprints MUST be embedded BEFORE deduplication runs.
2026-01-14 02:05:04 | ERROR |    Workflow order: 1) Embed fingerprints â†’ 2) Sync to Eagle tags â†’ 3) Run deduplication
2026-01-14 02:05:04 | WARNING | Failed step: deduplication - Fingerprint coverage below required threshold
2026-01-14 02:05:04 | ERROR | Deduplication failed
